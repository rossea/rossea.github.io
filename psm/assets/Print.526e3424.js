import{_ as T,r as D,H,D as O,h as V,C as E,q as g,d as F,o,c as s,b as m,F as _,e as f,u as M,f as h,w as v,x as q,B as w,t as b,I as y,j as x}from"./index.0c40de0b.js";import{u as z}from"./app.12d4ded5.js";const A={class:"A4"},I={class:"mt-12 mb-12"},R={class:"row"},W={key:0,class:"btn"},j={__name:"Print",setup(L){const r=D(!1),C=H(),P=O(),k=z(),S=V(()=>k.printPreviewPapers.map(e=>{const{paperTitle:i,paperSubTitle:a,numberOfPagerColumns:t,solution:l,formulas:n}=e,u=n.length/t,p=100/t,N=l=="0"?"16px":"160px";let c=[],d=0;for(;d<n.length;)c.push(n.slice(d,u+d)),d+=u;return c=c.reverse(),console.log(c),{paperTitle:i,paperSubTitle:a,columnsOfPaper:c,colWidth:p,rowHeight:N}}));E(()=>{const e=new Date,i=e.getFullYear(),a=e.getMonth()+1,t=e.getDate(),l=e.getHours(),n=e.getMinutes(),u=e.getSeconds(),p=`${i}${a}${t}${l}${n}${u}`;console.log(p),document.title=C.query.fileName+p,window.onbeforeprint=()=>{console.log("before"),r.value=!0},window.onafterprint=()=>{console.log("after"),g(()=>{r.value=!1})}});const $=()=>{P.back()},B=()=>{r.value=!0,g(()=>{window.print()})};return(e,i)=>{const a=F("ElButton");return o(),s("div",{class:w({preview:!r.value})},[m("div",A,[(o(!0),s(_,null,f(M(S),t=>(o(),s("div",{class:w(["sheet padding-10mm",{"sheet-shadow":!r.value}])},[m("div",I,[m("h4",null,b(t.paperSubTitle),1)]),m("div",R,[(o(!0),s(_,null,f(t.columnsOfPaper,l=>(o(),s("div",{style:y(`width: ${t.colWidth}%;`)},[(o(!0),s(_,null,f(l,n=>(o(),s("p",{style:y(`margin-bottom: ${t.rowHeight}`)},b(n),5))),256))],4))),256))])],2))),256)),r.value?q("",!0):(o(),s("div",W,[h(a,{onClick:$},{default:v(()=>[x("\u8FD4\u56DE")]),_:1}),h(a,{class:"mr-2 w-32",type:"primary",onClick:B},{default:v(()=>[x("\u6253\u5370")]),_:1})]))])],2)}}},J=T(j,[["__scopeId","data-v-b596a2ba"]]);export{J as default};
